const Cactus = require('./lib/Cactus')

let bot = new Cactus('pIqmSeQI')

bot.on('ready', () => {
	bot.send('sendtextmessage', {
		target: 2,
		targetmode: 1,
		msg: 'hello world'
	}, (res) => {
		console.log(res)
	})

	bot.send('channellist', (res) => {
		for (let channel of res.body) {
			bot.send('channelinfo', {cid: channel.cid} , (res) => {
				console.log(res.body.seconds_empty)
			})
		}
	})

	bot.send('help', (res) => {
		console.log(res.data)
	})
})

process.stdin.on('readable', () => {
	let chunk = process.stdin.read()
	if (chunk !== null)
		bot.raw(chunk, (res) => {
			console.log(res)
		})
})
